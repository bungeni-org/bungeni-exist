<?xml version="1.0" encoding="UTF-8"?>
<div xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xf="http://www.w3.org/2002/xforms">
    <xf:model id="doctype" ev:event="xforms-revalidate" ev:defaultAction="cancel">
        <xf:instance xmlns="" id="default">
            <doctype name="group">
                <orderbys>
                    <orderby value="start_dt_oldest" order="asc">start date [oldest]</orderby>
                    <orderby value="start_dt_newest" order="desc">start date [newest]</orderby>
                </orderbys>
                <searchins>
                    <searchin value="title">Title</searchin>
                    <searchin value="body">Body</searchin>
                </searchins>
            </doctype>
        </xf:instance>
        <xf:bind id="dt-name" nodeset="/doctype/@name" type="string"/>
        <xf:bind id="odby-value" nodeset="/doctype/orderbys/orderby/@value" type="string"/>
        <xf:bind id="odby-order" nodeset="/doctype/orderbys/orderby/@order" type="string"/>
        <xf:bind id="odby" nodeset="/doctype/orderbys/orderby" type="string"/>
        <xf:bind id="sin-value" nodeset="/doctype/searchins/searchin/@value" type="string"/>
        <xf:bind id="sin" nodeset="/doctype/searchins/searchin" type="string"/>
        <xf:submission id="s-load-from-master" resource="model:master#instance('doctype')/ui/doctypes/doctype[index('doctypes')]" replace="instance" method="get">
            <xf:message ev:event="xforms-submit-done" level="ephemeral">Subform has updated itself.</xf:message>
        </xf:submission>
        <xf:submission id="s-update-master" resource="model:master#instance('doctype')/ui/doctypes/doctype[index('doctypes')]" replace="none" method="post">
            <xf:message ev:event="xforms-submit-done" level="ephemeral">Subform has updated Master.</xf:message>
        </xf:submission>
        <xf:send ev:event="xforms-ready" submission="s-load-from-master"/>
    </xf:model>
    <xf:group appearance="full">
        <xf:action ev:event="betterform-variable-changed" ev:observer="ui-config">
            <xf:message>it worked</xf:message>
        </xf:action>
        <xf:label>Doctypes Subform</xf:label>
        <!--
        <xf:input ref="/ui/doctypes/doctype/@name">
            <xf:label id="title">Name</xf:label>
        </xf:input> -->
        <xf:input bind="odby-value">
            <xf:label id="lbl-odby-value">Orderby Value</xf:label>
        </xf:input>
        <xf:input bind="odby-order">
            <xf:label id="lbl-odby-order">Orderby Order</xf:label>
        </xf:input>
        <xf:input bind="odby">
            <xf:label id="lbl-odby">Orderby</xf:label>
        </xf:input>
        <xf:input bind="sin-value">
            <xf:label id="lbl-sin-value">Searchin Value</xf:label>
        </xf:input>
        <xf:input bind="sin">
            <xf:label id="lbl-sin">Searchin</xf:label>
            <xf:alert>Please put your ZIP code here</xf:alert>
        </xf:input>
        <xf:trigger appearance="triggerMiddleColumn">
            <xf:label>Update Doctype Configuration</xf:label>
            <xf:hint>Click apply to update the document configuration</xf:hint>
            <xf:send submission="s-update-master"/>
        </xf:trigger>
    </xf:group>
</div>