<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    
    This file is the UI configuration file used by the System 
    It describes date formats , route navigations and tab structures for the application
    -->
<ui>

    <!-- 
        specify date and datetime formats here , these formats are used by the XSLT scripts
        We use the XSLT date formatting style to format dates
    -->
    <format type="datetime">[D1o] [MNn,*-3], [Y] - [h]:[m]:[s] [P,2-2]</format>
    <format type="date">[D1o] [MNn,*-3], [Y]</format>
    
    <!--
        Route Map
        This describes properties associated with every url supported by the application.
        The route map describes what will be the default title used on the page resolving to the route,
        also describes what the active navigation and subnavigation for the route. Eventually this can 
        be used to render a breadcrumb
        -->
    <routes>
        <!--
            href - the incoming url, this is used to load the main menu
            navigation - specifies the active navigation level 1
            subnavigation - specifies te active navigation level 2
            -->
        <route href="/">
            <navigation>home</navigation>
            <title>Home</title>
        </route>
        <route href="/home">
            <navigation>home</navigation>
            <title>Home</title>
        </route>
        <route href="/search">
            <navigation>business</navigation>
            <title>Search</title>
        </route>
        <route href="/business">
            <navigation>business</navigation>
            <title>Business</title>
        </route>
        <route href="/members">
            <title>Members</title>
            <navigation>members</navigation>
            <subnavigation>current</subnavigation>
        </route>
        <route href="/member">
            <title>Business | Member of Parliament</title>
            <navigation>members</navigation>
            <subnavigation>current</subnavigation>
        </route>
        <route href="/member/personal-info">
            <title>Business | Member of Parliament</title>
            <navigation>members</navigation>
            <subnavigation>current</subnavigation>
        </route>
        <route href="/member/offices-held">
            <title>Business | Member of Parliament</title>
            <navigation>members</navigation>
            <subnavigation>current</subnavigation>
        </route>
        <route href="/member/parl-activities">
            <title>Business | Member of Parliament</title>
            <navigation>members</navigation>
            <subnavigation>current</subnavigation>
        </route>
        <route href="/member/contacts">
            <title>Business | Member of Parliament</title>
            <navigation>members</navigation>
            <subnavigation>current</subnavigation>
        </route>
        <!-- #COMMITTEES -->
        <route href="/committee/profile">
            <title>Business | Committee's Profile</title>
            <navigation>business</navigation>
            <subnavigation>committees</subnavigation>
        </route>
        <route href="/committee/members">
            <title>Business | Committee's Members</title>
            <navigation>business</navigation>
            <subnavigation>committees</subnavigation>
        </route>
        <route href="/committee/assigned-items">
            <title>Business | Committee's Assigned Items</title>
            <navigation>business</navigation>
            <subnavigation>committees</subnavigation>
        </route>
        <route href="/committee/sittings">
            <title>Business | Committee's Sittings</title>
            <navigation>business</navigation>
            <subnavigation>committees</subnavigation>
        </route>
        <route href="/committee/staff">
            <title>Business | Committee's Staff</title>
            <navigation>business</navigation>
            <subnavigation>committees</subnavigation>
        </route>
        <route href="/committee/contacts">
            <title>Business | Committee's Staff</title>
            <navigation>business</navigation>
            <subnavigation>committees</subnavigation>
        </route>        
        <!-- #BILLS -->
        <route href="/bills">
            <title>Business | Bills</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/text">
            <title>Business | Bill</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/version/text">
            <title>Business | Bill</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/timeline">
            <title>Business | Bill</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/version/timeline">
            <title>Business | Bill</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/assigned-groups">
            <title>Business | Bill</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/details">
            <title>Business | Bill</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/version/details">
            <title>Business | Bill Version</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/documents">
            <title>Business | Bill</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/version/documents">
            <title>Business | Bill</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bill/event">
            <title>Business | Bill Event</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>
        <route href="/bills/rss">
            <title>Business | Bill</title>
            <navigation>business</navigation>
            <subnavigation>bills</subnavigation>
        </route>               
        <!-- #QUESTIONS -->
        <route href="/questions">
            <title>Business | Questions </title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>
        <route href="/question/text">
            <title>Business | Question Text</title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>
        <route href="/question/version/text">
            <title>Business | Question Version Text</title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>
        <route href="/question/timeline">
            <title>Business | Question Timeline</title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>
        <route href="/question/version/timeline">
            <title>Business | Question Version Timeline</title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>
        <route href="/question/details">
            <title>Business | Related Infomation</title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>
        <route href="/question/version/details">
            <title>Business | Related Infomation</title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>
        <route href="/question/documents">
            <title>Business | Attachments</title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>
        <route href="/question/version/documents">
            <title>Business | Question Version Attachments</title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>
        <route href="/question/event">
            <title>Business | Question Event</title>
            <navigation>business</navigation>
            <subnavigation>questions</subnavigation>
        </route>          
        <!-- #MOTIONS -->
        <route href="/motions">
            <title>Business | Motions </title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/text">
            <title>Business | Motion</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/version/text">
            <title>Business | Motion Version Text</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/timeline">
            <title>Business | Motion</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/version/timeline">
            <title>Business | Motion Version Timeline</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/details">
            <title>Business | Motion</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/version/details">
            <title>Business | Motion Version Details</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/assigned-groups">
            <title>Business | Motion</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/version/assigned-groups">
            <title>Business | Motion Version Assigned-groups</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/documents">
            <title>Business | Motion</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/version/documents">
            <title>Business | Motion Version Documents</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>
        <route href="/motion/event">
            <title>Business | Motion Event</title>
            <navigation>business</navigation>
            <subnavigation>motions</subnavigation>
        </route>          
        <!-- #TABLED DOCUMENTS -->
        <route href="/tableddocuments">
            <title>Business | Tabled Documents </title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/text">
            <title>Business | Tabled document</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/version/text">
            <title>Business | Tabled document Version Document</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/timeline">
            <title>Business | Tabled document</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/details">
            <title>Business | Tabled document</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/version/details">
            <title>Business | Tabled document Version Details</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/assigned-groups">
            <title>Business | Tabled document</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/version/assigned-groups">
            <title>Business | Tabled document Version Assigned-groups</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/documents">
            <title>Business | Tabled document</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/version/documents">
            <title>Business | Tabled document Version Documents</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/tableddocument/event">
            <title>Business | Tabled document Event</title>
            <navigation>business</navigation>
            <subnavigation>tableddocuments</subnavigation>
        </route>
        <route href="/committees">
            <title>Business | Committees </title>
            <navigation>business</navigation>
            <subnavigation>committees</subnavigation>
        </route>
        <route href="/agendaitems">
            <title>Business | Agenda Items </title>
            <navigation>business</navigation>
            <subnavigation>agendaitems</subnavigation>
        </route>
        <route href="/sittings">
            <title>Business | Sittings </title>
            <navigation>business</navigation>
            <subnavigation>sittings</subnavigation>
        </route>
        <route href="/publications">
            <title>Business | Publications </title>
            <navigation>business</navigation>
            <subnavigation>publications</subnavigation>
        </route>
        <route href="/politicalgroups">
            <title>Business | Political Groups </title>
            <navigation>business</navigation>
            <subnavigation>politicalgroups</subnavigation>
        </route>
    </routes>
    
    <!--
        Menu groups 
        -->
    <menugroups>
        
        <!-- 
            The menu navigation is defined here 
            The menus themselves are defined in XHTML 
                - the main navigation uses the id "mainnav"
                - the sub navigation uses the id "subnav"
                - the for attribute refers to a /route/navigation
        -->
        <menu name="mainnav" for="/">
            <div xmlns="http://www.w3.org/1999/xhtml" id="mainnav" class="menu">
                <ul class="theme-lev-1" id="menu-level-mainnav">
                    <li>
                        <a name="home" href="home">home</a>
                    </li>
                    <li>
                        <a name="business" href="business">business</a>
                    </li>
                    <li>
                        <a name="members" href="members">members</a>
                    </li>
                </ul>
            </div>
        </menu>
        <menu name="home" for="home">
            <div xmlns="http://www.w3.org/1999/xhtml" id="subnav" class="submenu">
                <ul id="portal-home">
                    <li/>
                </ul>
            </div>
        </menu>
        <menu name="business" for="business">
            <div xmlns="http://www.w3.org/1999/xhtml" id="subnav" class="submenu">
                <ul class="theme-lev-1">
                    <li>
                        <a name="committees" href="committees">committees</a>
                    </li>
                    <li>
                        <a name="bills" href="bills">bills</a>
                    </li>
                    <li>
                        <a name="questions" href="questions">questions</a>
                    </li>
                    <li>
                        <a name="motions" href="motions">motions</a>
                    </li>
                    <li>
                        <a name="tableddocuments" href="tableddocuments">tabled documents</a>
                    </li>
                    <li>
                        <a name="agendaitems" href="agendaitems">agenda items</a>
                    </li>
                    <li>
                        <a name="sittings" href="sittings">sittings</a>
                    </li>
                    <li>
                        <a name="publications" href="publications">publications</a>
                    </li>
                    <li>
                        <a name="politicalgroups" href="politicalgroups">politicalgroups</a>
                    </li>
                </ul>
            </div>
        </menu>
        <menu name="members" for="members">
            <div xmlns="http://www.w3.org/1999/xhtml" id="subnav" class="submenu">
                <ul class="theme-lev-1">
                    <li>
                        <a name="current" href="members">current</a>
                    </li>
                    <li>
                        <a name="sittings" href="sittings">sittings</a>
                    </li>
                    <li>
                        <a name="publications" href="publications">publications</a>
                    </li>
                    <li>
                        <a name="politicalgroups" href="politicalgroups">politicalgroups</a>
                    </li>
                </ul>
            </div>
        </menu>
    </menugroups>
    
    <!-- 
        Download formats
    -->
    <downloadgroups>
        <listings>
            
        </listings>
        <document>
            
        </document>
    </downloadgroups>
    
    <!--
        Tab Groups
        -->
    <tabgroups>
        <!-- 
            Tabgroups are like navigation but they describe navigation relative to content 
            The name is always that of a content type
        -->
        <tabs name="group">
            <tab path="committee/profile" id="profile">
                <title>profile</title>
            </tab>
            <tab path="committee/members" id="members">
                <title>members</title>
            </tab>
            <tab path="committee/assigned-items" id="assigned">
                <title>assigned items</title>
            </tab>
            <tab path="committee/sittings" id="sittings">
                <title>sittings</title>
            </tab>
            <tab path="committee/staff" id="staff">
                <title>staff</title>
            </tab>
            <tab path="committee/contacts" id="contacts">
                <title>contacts</title>
            </tab>
        </tabs>
        <tabs name="bill-ver">
            <tab path="bill/version/text" id="text">
                <title>text</title>
            </tab>
            <tab path="bill/version/details" id="related">
                <title>details</title>
            </tab>
            <tab path="bill/version/documents" id="attachments">
                <title>documents</title>
            </tab>
        </tabs>
        <tabs name="bill">
            <tab path="bill/text" id="text">
                <title>text</title>
            </tab>
            <tab path="bill/timeline" id="timeline">
                <title>history</title>
            </tab>
            <tab path="bill/details" id="related">
                <title>details</title>
            </tab>
            <tab path="bill/assigned-groups" id="assigned">
                <title>assigned groups</title>
            </tab>
            <tab path="bill/documents" id="attachments">
                <title>documents</title>
            </tab>
        </tabs>
        <tabs name="question-ver">
            <tab path="question/version/text" id="text">
                <title>text</title>
            </tab>
            <tab path="question/version/details" id="related">
                <title>details</title>
            </tab>
            <tab path="question/version/documents" id="attachments">
                <title>documents</title>
            </tab>
        </tabs>
        <tabs name="question">
            <tab path="question/text" id="text">
                <title>text</title>
            </tab>
            <tab path="question/timeline" id="timeline">
                <title>history</title>
            </tab>
            <tab path="question/details" id="related">
                <title>details</title>
            </tab>
            <tab path="question/documents" id="attachments">
                <title>documents</title>
            </tab>
        </tabs>
        <tabs name="motion-ver">
            <tab path="motion/text" id="text">
                <title>text</title>
            </tab>
            <tab path="motion/timeline" id="timeline">
                <title>history</title>
            </tab>
            <tab path="motion/details" id="related">
                <title>details</title>
            </tab>
        </tabs>
        <tabs name="motion">
            <tab path="motion/text" id="text">
                <title>text</title>
            </tab>
            <tab path="motion/timeline" id="timeline">
                <title>history</title>
            </tab>
            <tab path="motion/details" id="related">
                <title>details</title>
            </tab>
            <tab path="motion/assigned-groups" id="assigned">
                <title>assigned groups</title>
            </tab>
            <tab path="motion/documents" id="attachments">
                <title>documents</title>
            </tab>
        </tabs>
        <tabs name="tableddocument-ver">
            <tab path="tableddocument/version/text" id="text">
                <title>text</title>
            </tab>
            <tab path="tableddocument/version/details" id="related">
                <title>details</title>
            </tab>
        </tabs>
        <tabs name="tableddocument">
            <tab path="motion/text" id="text">
                <title>text</title>
            </tab>
            <tab path="tableddocument/timeline" id="timeline">
                <title>history</title>
            </tab>
            <tab path="tableddocument/details" id="related">
                <title>details</title>
            </tab>
            <tab path="tableddocument/assigned-groups" id="assigned">
                <title>assigned groups</title>
            </tab>
            <tab path="tableddocument/documents" id="attachments">
                <title>documents</title>
            </tab>
        </tabs>
        <tabs name="user">
            <tab path="member" id="member">
                <title>member</title>
            </tab>
            <tab path="member/personal-info" id="info">
                <title>information</title>
            </tab>
            <tab path="member/offices-held" id="offices">
                <title>offices held</title>
            </tab>
            <tab path="member/parl-activities" id="activities">
                <title>parliament activities</title>
            </tab>
            <tab path="member/contacts" id="contacts">
                <title>contacts</title>
            </tab>
        </tabs>
    </tabgroups>
    
    <!--
        ACL GROUPS define permission accessors for documents 
        
        the @axis and @condition are combined to create a filter on a legislativeitem document.
        concat(@axis,[,@condition,])
        -->
    <acl-groups>

        <!-- !+FIX_THIS_TODO (ah, nov-2011) axis needs to be factored as a sub-element since axis is different for different content 
            types -->
        <acl name="public-view" axis="bu:document[@type=$$TYPE] and bu:legislativeItem/(bu:permissions except bu:versions)/bu:permission" condition="@name='zope.View' and @role='bungeni.Anonymous' and @setting='Allow'"/>
        <acl name="authenticated-view" axis="following-sibling::bu:permisssions/bu:permission" condition="@name='zope.View' and @role='bungeni.Authenticated' and @setting='Allow'"/>
    </acl-groups>

    <!-- Document Types -->
    <doctypes>
        <doctype name="group">
            <orderbys>
                <orderby value="start_dt_oldest" order="asc">start date [oldest]</orderby>
                <orderby value="start_dt_newest" order="desc">start date [newest]</orderby>
                <orderby value="fN_asc" order="asc">full name [ascending]</orderby>
                <orderby value="fN_desc" order="desc">full name [descending]</orderby>
            </orderbys>
            <searchins>
                <searchin value="title">Title</searchin>
                <searchin value="body">Body</searchin>
            </searchins>
        </doctype>
        <doctype name="bill">
            <orderbys>
                <orderby value="st_date_oldest" order="asc">status date [oldest]</orderby>
                <orderby value="st_date_newest" order="desc">status date [newest]</orderby>
            </orderbys>
            <searchins>
                <searchin value="title">Title</searchin>
                <searchin value="body">Body</searchin>
            </searchins>
        </doctype>
        <doctype name="question">
            <orderbys>
                <orderby value="st_date_oldest" order="asc">status date [oldest]</orderby>
                <orderby value="st_date_newest" order="desc">status date [newest]</orderby>
                <orderby value="sub_date_oldest" order="asc">submission date [oldest]</orderby>
                <orderby value="sub_date_newest" order="desc">submission date [newest]</orderby>
            </orderbys>
            <searchins>
                <searchin name="f_t" value="title" default="true">Title</searchin>
                <searchin name="f_b" value="body">Body</searchin>
                <searchin name="f_d" value="docno">Doc No.</searchin>
            </searchins>
        </doctype>
        <doctype name="motion">
            <orderbys>
                <orderby value="st_date_oldest" order="asc">status date [oldest]</orderby>
                <orderby value="st_date_newest" order="desc">status date [newest]</orderby>
                <orderby value="sub_date_oldest" order="asc">submission date [oldest]</orderby>
                <orderby value="sub_date_newest" order="desc">submission date [newest]</orderby>
            </orderbys>
            <searchins>
                <searchin value="title">Title</searchin>
                <searchin value="body">Body</searchin>
                <searchin value="docno">Doc No.</searchin>
            </searchins>
        </doctype>
        <doctype name="tableddocument">
            <orderbys>
                <orderby value="st_date_oldest" order="asc">status date [oldest]</orderby>
                <orderby value="st_date_newest" order="desc">status date [newest]</orderby>
                <orderby value="sub_date_oldest" order="asc">submission date [oldest]</orderby>
                <orderby value="sub_date_newest" order="desc">submission date [newest]</orderby>
            </orderbys>
            <searchins>
                <searchin value="title">Title</searchin>
                <searchin value="body">Body</searchin>
            </searchins>
        </doctype>
    </doctypes>
</ui>